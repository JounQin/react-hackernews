!function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=23)}([function(e,r,t){"use strict";t.d(r,"a",function(){return i}),t.d(r,"b",function(){return s}),t.d(r,"c",function(){return c}),t.d(r,"g",function(){return a}),t.d(r,"h",function(){return u}),t.d(r,"d",function(){return l}),t.d(r,"e",function(){return f}),t.d(r,"f",function(){return p});var n=t(15),o=t.n(n),i="production",s="development"===i,c=s?"hash":"contenthash",a="0.0.0.0",u=process.env.PORT||4e3,l="/",f=o.a.resolve,p="undefined"==typeof require?t(24):require},function(e,r){e.exports=require("webpack")},function(e,r){e.exports=require("debug")},function(e,r){e.exports=require("webpack-merge")},function(e,r){e.exports=require("koa-static-cache")},function(e,r){e.exports=require("mini-css-extract-plugin")},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("koa")},function(e,r){e.exports=require("koa-cash")},function(e,r){e.exports=require("koa-compose")},function(e,r){e.exports=require("koa-compress")},function(e,r){e.exports=require("koa-logger")},function(e,r){e.exports=require("koa-mount")},function(e,r){e.exports=require("lru-cache")},function(e,r){e.exports=require("react-server-renderer")},function(e,r){e.exports=require("path")},function(e,r){e.exports=require("koa-webpack")},function(e,r){e.exports=require("memory-fs")},function(e,r){e.exports=require("react-server-renderer/client-plugin")},function(e,r){e.exports=require("sw-precache-webpack-plugin")},function(e,r){e.exports=require("friendly-errors-webpack-plugin")},function(e,r){e.exports=require("webpack-node-externals")},function(e,r){e.exports=require("react-server-renderer/server-plugin")},function(e,r,t){"use strict";t.r(r);var n=t(6),o=t.n(n),i=t(2),s=t.n(i),c=t(7),a=t.n(c),u=t(8),l=t.n(u),f=t(9),p=t.n(f),d=t(10),b=t.n(d),m=t(11),g=t.n(m),v=t(12),O=t.n(v),j=t(4),y=t.n(j),h=t(13),w=t.n(h),x=t(14),P=t(0);function k(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function S(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var q,_,E=s()("1stg:server"),M=P.b?t(25).renderFile(Object(P.e)("server/template.pug"),{pretty:!0}):o.a.readFileSync(Object(P.e)("dist/template.html"),"utf-8"),D=new a.a,R=new w.a(1e3),C=[g()(),O()("/public",y()(Object(P.e)("public"),{maxAge:31536e6})),async function(e,r){if(P.b)await q;else if(await e.cashed())return;if("GET"!==e.method||e.url.lastIndexOf(".")>e.url.lastIndexOf("/")||!["*/*","text/html"].find(function(r){return e.get("Accept").includes(r)}))return r();var t={ctx:e,title:"React Hackernews"};e.respond=!1;var n=e.res;_.renderToStream(t).on("afterRender",function(){e.status=t.code||200,e.set({"Content-Type":"text/html"})}).on("error",function(r){var t=r.status,o=r.url;if(o)return e.status=302,e.set({Location:o}),n.end();switch(e.status=t||500,t){case 404:return n.end("404 | Page Not Found");default:n.end("500 | Internal Server Error"),E("error during render : ".concat(o)),E(r.stack)}}).pipe(n)}],T=function(e,r){return Object(x.createBundleRenderer)(e,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?k(t,!0).forEach(function(r){S(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},r,{template:M,basedir:Object(P.e)("dist/static"),runInNewContext:!1}))};if(P.b){var F=t(26).default(function(e){var r=e.bundle,t=e.clientManifest;_=T(r,{clientManifest:t})}),$=F.readyPromise,N=F.webpackMiddlewarePromise;q=$,N.then(function(e){return D.use(e)})}else{_=T(Object(P.f)(Object(P.e)("dist/react-ssr-server-bundle.json")),{clientManifest:Object(P.f)(Object(P.e)("dist/react-ssr-client-manifest.json"))});var I={};C.splice(1,0,b()(),y()(Object(P.e)("dist/static"),{maxAge:31536e6},I),l()({get:function(e){return R.get(e)},set:function(e,r){return R.set(e,r)}})),I["/service-worker.js"].maxAge=0}D.use(p()(C)),D.listen(P.h,P.g,function(){E("Server start listening at %s:%s",P.g,P.h)})},function(e,r){function t(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=24},function(e,r){e.exports=require("pug")},function(e,r,t){"use strict";t.r(r);var n=t(2),o=t.n(n),i=t(16),s=t.n(i),c=t(17),a=t.n(c),u=t(1),l=t.n(u),f=t(0),p=t(3),d=t.n(p),b=t(18),m=t(19),g=t.n(m),v=t(20),O=t.n(v),j=t(5),y=t.n(j);function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?h(t,!0).forEach(function(r){x(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function x(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var P={sourceMap:f.b},k=function(e){return[e?{loader:"react-style-loader",options:{manualInject:e}}:y.a.loader,{loader:"css-loader",options:P},{loader:"postcss-loader",options:P},{loader:"sass-loader",options:P}]},S=function(e){return{test:/\.js$/,loader:"babel-loader",exclude:/node_modules/,options:w({cacheDirectory:!0},e&&{presets:[["@babel/env",{modules:!1,exclude:["babel-plugin-transform-async-to-generator","babel-plugin-transform-regenerator"]}]]})}},q={mode:f.a,resolve:{alias:{lodash$:"lodash-es"},extensions:[".js",".scss"],modules:[Object(f.e)("src"),"node_modules"]},module:{rules:[{test:/\.pug$/,loader:"pug-plain-loader",options:{pretty:f.b}},{test:/\.scss$/,oneOf:[{test:/app.scss$/,use:k()},{use:k(!0)}]}]},plugins:[new l.a.DefinePlugin({__DEV__:f.b}),new y.a({filename:"[name].[".concat(f.c,"].css")}),new O.a]},_=d.a.smart(q,{entry:{app:[Object(f.e)("src/entry-client.js")]},resolve:{alias:{"create-api":"./create-api-client.js"}},output:{publicPath:f.d,path:Object(f.e)("dist/static"),filename:"[name].[".concat(f.c,"].js")},module:{rules:[S()]},optimization:{runtimeChunk:{name:"manifest"},splitChunks:{cacheGroups:{vendors:{chunks:"initial",name:"vendors",test:/node_modules/}}}},plugins:[new l.a.DefinePlugin({"process.env.REACT_ENV":'"client"',__SERVER__:!1}),new b.ReactSSRClientPlugin({filename:"../react-ssr-client-manifest.json"})]});f.b||_.plugins.push(new g.a({cacheId:"react-hn",filename:"service-worker.js",minify:!0,dontCacheBustUrlsMatching:/./,staticFileGlobsIgnorePatterns:[/index\.html$/,/\.map$/,/\.json$/],runtimeCaching:[{urlPattern:/^https?:\/\//,handler:"networkFirst"}]}));var E=_,M=t(21),D=t.n(M),R=t(22),C=d.a.smart(q,{entry:Object(f.e)("src/entry-server.js"),resolve:{alias:{"create-api":"./create-api-server.js"}},target:"node",output:{path:Object(f.e)("dist"),filename:"[name].[chunkhash].js",libraryTarget:"commonjs2"},externals:D()({whitelist:/\.s?css$/}),module:{rules:[S(!0)]},plugins:[new l.a.DefinePlugin({"process.env.REACT_ENV":'"server"',__SERVER__:!0}),new R.ReactSSRServerPlugin]}),T=o()("1stg:server:dev");r.default=function(e){var r,t,n,o,i=new Promise(function(e){r=e}),c=function(){r(),e.apply(void 0,arguments)},u=l()(E),p=s()({compiler:u,devMiddleware:{stats:{colors:!0}}});u.plugin("done",function(e){(e=e.toJson()).errors.forEach(T),e.warnings.forEach(T),e.errors.length||p.then(function(e){o=e.devMiddleware.fileSystem,t=JSON.parse(o.readFileSync(Object(f.e)("dist/react-ssr-client-manifest.json"))),n&&c({bundle:n,clientManifest:t,fs:o})})});var d=new a.a,b=l()(C);return b.outputFileSystem=d,b.watch({},function(e,r){if(e)throw e;(r=r.toJson()).errors.length||(n=JSON.parse(d.readFileSync(Object(f.e)("dist/react-ssr-server-bundle.json"))),t&&c({bundle:n,clientManifest:t,fs:o}))}),{readyPromise:i,webpackMiddlewarePromise:p}}}]);